<!DOCTYPE html>
<html>
    <head>
        <title>The Keid Programming Language Book</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
        <style>
            li {
                list-style-type: none;
            }

            .container {
                max-width: 100vw !important;
            }

            .sidebar-link {
                color: inherit;
                text-decoration: none;
            }

            .sidebar-link:hover {
                color: #0000EE;
                text-decoration: none;
                cursor: pointer;
            }

            .sidebar {
                background-color: #eeeeee;
                min-height: 100vh;
                padding: 25px 0px 0px 0px;
            }

            .content {
                padding: 25px 0px 0px 25px;
                margin-bottom: 100px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-md-2 sidebar">
                    <ol>
                        <li>
                            <a href="index" class="sidebar-link" id="link-index">
                                <!-- triple handlebars so we can use nbsp -->
                                <b>0.</b>&nbsp;The Keid Programming Language
                            </a>
                        </li>
                        <li>
                            <a href="intro" class="sidebar-link" id="link-intro">
                                <!-- triple handlebars so we can use nbsp -->
                                <b>1.</b>&nbsp;Introduction
                            </a>
                        </li>
                        <li>
                            <a href="memory" class="sidebar-link" id="link-memory">
                                <!-- triple handlebars so we can use nbsp -->
                                <b>&nbsp;&nbsp;&nbsp;&nbsp;1.1</b>&nbsp;Memory
                            </a>
                        </li>
                        <li>
                            <a href="undefined-behavior" class="sidebar-link" id="link-undefined-behavior">
                                <!-- triple handlebars so we can use nbsp -->
                                <b>&nbsp;&nbsp;&nbsp;&nbsp;1.2</b>&nbsp;Undefined Behavior
                            </a>
                        </li>
                        <li>
                            <a href="basics" class="sidebar-link" id="link-basics">
                                <!-- triple handlebars so we can use nbsp -->
                                <b>2.</b>&nbsp;Basics
                            </a>
                        </li>
                        <li>
                            <a href="hello-world" class="sidebar-link" id="link-hello-world">
                                <!-- triple handlebars so we can use nbsp -->
                                <b>&nbsp;&nbsp;&nbsp;&nbsp;2.1</b>&nbsp;Hello, World!
                            </a>
                        </li>
                        <li>
                            <a href="types" class="sidebar-link" id="link-types">
                                <!-- triple handlebars so we can use nbsp -->
                                <b>&nbsp;&nbsp;&nbsp;&nbsp;2.2</b>&nbsp;Types
                            </a>
                        </li>
                        <li>
                            <a href="objects" class="sidebar-link" id="link-objects">
                                <!-- triple handlebars so we can use nbsp -->
                                <b>&nbsp;&nbsp;&nbsp;&nbsp;2.3</b>&nbsp;Objects
                            </a>
                        </li>
                    </ol>
                </div>
                <div class="col-md-5 offset-md-2 content">
                    <h1>Declaring Types</h1>
<p>There are three different declarable types in Keid: class types, struct types, and interface types. </p>
<h2>Class Types</h2>
<p>Class types are stored in the heap and have their managed by the Keid runtime. Their memory is diposed of using reference counting. Instances of class types can simply be thought of as a reference to memory in the heap.</p>
<pre><code class="language-keid">class Person {
    age: uint32
    name: string

    say_hello() {
        std::io::println(&quot;Hello, I am &quot;, this.name, &quot;!&quot;)
    }
}
</code></pre>
<h2>Struct Types</h2>
<p>Struct types are syntactically declared nearly identially to classes.
The only difference is that the <code>class</code> keyword becomes the <code>struct</code> keyword.</p>
<pre><code class="language-keid">struct Person {
    age: uint32
    name: string

    say_hello() {
        std::io::println(&quot;Hello, I am &quot;, this.name, &quot;!&quot;)
    }
}
</code></pre>
<p>This code will produce the same output at the class declaration, but structs and classes don&#39;t have identical behavior.
There is a fundamental difference in how class types and struct types are stored in memory.</p>
<p>Structs are stored on the stack and are treated the same as primitive types.
When passed to functions, a full copy of the struct is made.
Simply put, structs types are pass-by-value.</p>
<h2>Interface Types</h2>
<p>Interfaces are very different than classes and structs.
Interfaces can only declare function and accessor headers, as well as associated types.</p>
<pre><code class="language-keid">interface Foo {
    type Output

    do_a_foo(x: string, y: uint32): Output
}

implement Foo for Bar {
    type Output = int8

    do_a_foo(x: string, y: uint32): int8 {
        ...
    }
}
</code></pre>
<h3>Associated Types</h3>
<p>TODO</p>
<h1>Structs and Objects</h1>
<p>The term &quot;object&quot; is abstract by nature and can mean various things in various contexts. In Keid, an object is defined as &quot;an instance of a class or interface type&quot;. Another way to conceptualize this is that something is an object if its data stored in the heap.</p>
<p>Per this definition, struct types and primitives (i.e. anything pass-by-value) are not objects. Struct types are are not assignable to a <code>core::object::Object</code>.</p>
 <!-- triple handlebars doesn't escape the variable, which we need here-->
                </div>
            </div>
        </div>
        <script>
            const pathname = window.location.pathname.substring(6);
            const link = document.getElementById('link-' + pathname);
            if (link !== null) {
                link.style.color = '#0000EE';
            }
        </script>
    </body>
</html>
